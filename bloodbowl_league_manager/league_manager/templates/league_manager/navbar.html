<!-- Sidebar Toggle Button (for mobile) -->
<button class="btn btn-dark d-lg-none m-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu">
    â˜° Menu
</button>

<!-- Sidebar -->
<div class="offcanvas-lg offcanvas-start bg-dark text-white p-3 vh-100 col-lg-1" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title text-light" id="sidebarMenuLabel">Menu</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>

    <div class="offcanvas-body">
        <ul class="nav flex-column">
            <!-- Home -->
            <li class="nav-item">
                <a href="{% url 'index' %}" class="nav-link text-white">ğŸ  Home</a>
            </li>

            <!-- Teams Dropdown -->
            <li class="nav-item">
                <a class="nav-link text-white" data-bs-toggle="collapse" href="#teamsDropdown" role="button" aria-expanded="false" aria-controls="teamsDropdown">
                    âš½ Teams â–¼
                </a>
                <div class="collapse" id="teamsDropdown">
                    <ul class="nav flex-column ms-3">
                        <li class="nav-item">
                            <a href="{% url 'teams' %}" class="nav-link text-white">ğŸ“‹ Show Teams</a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'create_team' %}" class="nav-link text-white">â• Create New Team</a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Leagues Dropdown -->
            <li class="nav-item">
                <a class="nav-link text-white" data-bs-toggle="collapse" href="#leaguesDropdown" role="button" aria-expanded="false" aria-controls="leaguesDropdown">
                    ğŸ† Leagues â–¼
                </a>
                <div class="collapse" id="leaguesDropdown">
                    <ul class="nav flex-column ms-3">
                        <li class="nav-item">
                            <a href="{% url 'leagues' %}" class="nav-link text-white">ğŸ“œ Show Leagues</a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'create_league' %}" class="nav-link text-white">â• Create New League</a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Factions -->
            <li class="nav-item">
                <a href="{% url 'factions' %}" class="nav-link text-white">ğŸ›¡ï¸ Factions</a>
            </li>
        </ul>
    </div>
</div>

<!-- Simple script to retain collapsed status when navigating to new page -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Restore dropdown state from localStorage
        let dropdowns = ["teamsDropdown", "leaguesDropdown"];
        dropdowns.forEach(id => {
            if (localStorage.getItem(id) === "open") {
                document.getElementById(id).classList.add("show");
            }
        });

        // Listen for collapse events to store state
        document.querySelectorAll('.collapse').forEach(item => {
            item.addEventListener('shown.bs.collapse', function () {
                localStorage.setItem(this.id, "open");
            });
            item.addEventListener('hidden.bs.collapse', function () {
                localStorage.removeItem(this.id);
            });
        });
    });
</script>
